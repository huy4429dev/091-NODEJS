<style>
    ul.pagination.justify-content-end.mb-0 {
        display: flex;
        position: absolute;
        bottom: 10px;
        right: 10px;
    }

    a.page-link {
        padding: 8px 12px;
        border: 1px solid gray;
        margin: 0 5px;
    }

    li.page-item.active {
        font-weight: bold;
    }

    li.page-item.active a {
        border: 1px solid black;
    }

    .tooltip {
        position: relative;
        display: inline-block;
    }

    .tooltip .tooltiptext {
        visibility: hidden;
        width: 100%;
        background-color: black;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 5px 0;
        font-size: 14px;
        /* Position the tooltip */
        position: absolute;
        top: -35px;
        z-index: 1;
    }

    .tooltip:hover .tooltiptext {
        visibility: visible;
    }

    .dropbtn {
        background-color: #3498DB;
        color: white;
        padding: 16px;
        font-size: 16px;
        border: none;
        cursor: pointer;
    }

    .dropbtn:hover,
    .dropbtn:focus {
        background-color: #2980B9;
    }

    .dropdown {
        position: relative;
        display: inline-block;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f1f1f1;
        min-width: 160px;
        overflow: auto;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        z-index: 1;
    }

    .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
    }

    .dropdown a:hover {
        background-color: #ddd;
    }

    .show {
        display: block;
    }
</style>
<div class="container filter">
    <div class="two-side">
        <!-- Aside left -->
        <div class="filter-tool">
            <form action="" method="GET">
                <div class="title-col">
                    <h3>Bộ lọc</h3>
                    <button>Áp dụng</button>
                </div>
                <div class="line"></div>
                <!-- Giá -->
                <div class="price-filter">
                    <h3>Giá</h3>
                    <div class="price">
                        <div class="block">
                            <input type="checkbox" id="all" name="price" value="all" onclick="pickAll()">
                            <label for="all"> Tất cả</label>
                        </div>
                        <div class="block">
                            <input type="checkbox" id="" name="price" value="200000">
                            <label for="">200k - 1tr</label>
                        </div>
                        <div class="block">
                            <input type="checkbox" id="" name="price" value="2000000">
                            <label for=""> 1tr - 2tr</label>
                        </div>
                        <div class="block">
                            <input type="checkbox" id="" name="price" value="3000000">
                            <label for=""> 2tr - 3tr</label><br>
                        </div>
                        <div class="block">
                            <input type="checkbox" id="" name="price" value="4000000">
                            <label for=""> 3tr - 4tr</label><br>
                        </div>
                        <div class="block">
                            <input type="checkbox" id="" name="price" value="6000000">
                            <label for=""> 4tr - 6tr</label><br>
                        </div>
                        <div class="block">
                            <input type="checkbox" id="" name="price" value="8000000">
                            <label for=""> 6tr - 8tr</label><br>
                        </div>
                        <div class="block">
                            <input type="checkbox" id="" name="price" value="10000000">
                            <label for=""> 8tr - 10tr</label><br>
                        </div>
                    </div>
                </div>
                <div class="line"></div>
                <!-- Loại phòng -->
                <div class="room-filter">
                    <h3>Loại phòng</h3>
                    <div class="room">
                        <% roomCategories.forEach(element=> { %>
                            <div class="block">
                                <input type="checkbox" id="" name="categoryId" value="<%= element.id %> ">
                                <label for="">
                                    <%= element.name %>
                                </label><br>
                            </div>
                            <% }) %>
                    </div>
                </div>
                <div class="line"></div>
            </form>
        </div>

        <!-- Aside right -->
        <div class="new-room" style="position: relative; padding: 20px; padding-bottom: 80px;">
            <!-- Tiêu đề -->
            <div class="section-heading">
                <div id="title-right">
                    <i class="fas fa-home"></i>
                    Phòng mới nhất
                </div>
            </div>
            <% if (categories.length===0) { %>
                <p>Không có kết quả nào cho từ khóa <%= q %>
                </p>
                <% } %>
                    <% if (categories) { %>
                        <% categories.forEach((item,index)=> { %>
                            <div class="card-items">
                                <!-- Phòng mới -->
                                <div class="card-item" style="width: 100%;">
                                    <div class="room-img" style="
                                     width: 250px;
                                    border-radius: 20px;
                                    height: 200px;
                                    margin-top: 10px;
                                ">
                                        <a href="/phong/<%= item.id %>">
                                            <img style="    
                                        width: 100%;
                                        object-fit: none;" src="<%= item.thumbnail %> " alt="">
                                        </a>
                                    </div>

                                    <div class="room-desc">
                                        <div class="room-desc-title">
                                            <h3 class="tooltip">
                                                <span class="tooltiptext">
                                                    <%= item.title.length> 45 ? item.title.substring(0,45) + " ..." :
                                                        item.title
                                                        %>
                                                </span>
                                                <a href="/phong/<%= item.id %>">
                                                    <%= item.title.length> 45 ? item.title.substring(0,45) + " ..." :
                                                        item.title
                                                        %>
                                                </a>
                                            </h3>
                                        </div>
                                        <div class="description">
                                            <p><i class="fas fa-home"></i>
                                                <%= item.name %>
                                            </p>
                                            <p><i class="fas fa-user-friends"></i> Nam + Nữ</p>
                                            <p><i class="fas fa-pencil-alt"></i>
                                                <%= item.acr %> m2
                                            </p>
                                            <p><i class="fas fa-map-marked-alt"></i>
                                                <span class="tooltip">
                                                    <span class="tooltiptext">
                                                        <%= item.address %>
                                                    </span>
                                                    <%= item.address.length> 45 ? item.title.substring(0,45) + " ..." :
                                                        item.address
                                                        %>
                                                </span>
                                            </p>
                                        </div>
                                    </div>

                                    <div class="room-price">
                                        <div id="num" style="font-size: 16px;">
                                            <%= item.price.toLocaleString('vi-VN', { style: 'currency' , currency: 'VND'
                                                }) %>
                                        </div>
                                    </div>
                                </div>
                                <div class="line"></div>
                            </div>
                            <% }) %>
                                <% } %>

                                    <ul class="pagination justify-content-end mb-0">
                                        <% for (i=1; i <=total; i ++) { %>
                                            <% if(curentPage==i) { %>
                                                <li class="page-item active">
                                                    <% if (q !='' || filter !='' ) { %>
                                                        <a class="page-link"
                                                            href="/admin/order/search?q=<%= q.replace(/%/g,'') %>&filterStatus=<%=filter%>&page=<%= i %>">
                                                            <%= i %>
                                                        </a>
                                                        <% } else { %>
                                                            <a class="page-link" href="/admin/order/?page=<%= i %>">
                                                                <%= i %>
                                                            </a>
                                                            <% } %>

                                                </li>
                                                <%} else { %>
                                                    <li class="page-item">

                                                        <% if (q !='' || filter !='' ) { %>
                                                            <a class="page-link"
                                                                href="/admin/order/search?q=<%= q.replace(/%/g,'') %>&filterStatus=<%=filter%>&page=<%= i %>">
                                                                <%= i %>
                                                            </a>
                                                            <% } else { %>
                                                                <a class="page-link" href="/admin/order/?page=<%= i %>">
                                                                    <%= i %>
                                                                </a>
                                                                <% } %>
                                                    </li>
                                                    <%} %>
                                                        <% } %>
                                    </ul>

        </div>
    </div>
</div>
<script>
    const elePrices = document.querySelectorAll('[name=price]');
    const eleCategoryIds = document.querySelectorAll('[name=categoryId]');
    function pickAll() {
        if (event.target.checked == true) {
            console.log("checked");
            elePrices.forEach(item => item.checked = true);
        }
        else {
            console.log("unchecked");
            elePrices.forEach(item => item.checked = false);
        }
    }

    function getParameterByName(name, url = window.location.href) {
        name = name.replace(/[\[\]]/g, '\\$&');
        const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    var getParams = function (url = window.location.href) {
        var params = {};
        var parser = document.createElement('a');
        parser.href = url;
        var query = parser.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split('=');
            params[pair[0]] = decodeURIComponent(pair[1]);
        }
        return params;
    };

    let price = getParams();
    console.log(price);

</script>